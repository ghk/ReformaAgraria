<div class="card w-100">
    <div class="card-body">
        <div class="d-flex card-title" style="justify-content: space-between;">
            <h4>Daftar Permasalahan Agraria</h4>

            <!-- start new add object and subject -->
            <div class="dropdown nav justify-content-end mr-3">
                <button type="button" class="btn btn-outline-primary dropdown-toggle" id="dropdownMenuForm" data-toggle="dropdown" aria-haspopup="true"
                    aria-expanded="false" title="Tambah data objek dan subjek tora">
                    <span class="oi oi-plus"></span>
                </button>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuForm">
                    <button class="dropdown-item" type="button" (click)="onUploadDocument()">Upload Dokumen</button>
                    <button class="dropdown-item" type="button" (click)="onShowToraObjectForm(null)">Tambah Objek Tora</button>
                </div>
            </div>
        </div>

        <!-- Table objek subjek -->
        <table class="table table-responsive-sm table-sm">
            <thead>
                <tr>                   
                    <th (click)="sorted('Lokasi')">Lokasi</th>
                    <th (click)="sorted('Penggarap')">Penggarap</th>
                    <th (click)="sorted('Luas')">Luas (ha)</th>
                    <th (click)="sorted('Status')">Status Tanah</th>
                    <th (click)="sorted('Usulan')">Usulan Skema</th>
                    <th>Koordinat</th>
                    <th>Tahapan</th>
                    <th></th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <ng-container *ngIf="loading">
                    <tr>
                        <td colspan="12">
                            <div class="col-md-12">
                                <div id="loader"></div>
                            </div>
                        </td>
                    </tr>
                </ng-container>
                <ng-container *ngIf="!loading">
                    <ng-container *ngFor="let object of toraObjects">
                        <tr>
                            <td>
                                <a routerLink="/toradetail/{{object.id}}">{{object.name}}</a>
                            </td>
                            <td>{{object.totalTenants}}</td>
                            <td>{{object.size > 0 ? (object.size | number : '1.2-2') : '-'}}</td>
                            <td>{{LandStatus[object.landStatus] | translate}}</td>
                            <td>{{object.proposedTreatment}}</td>
                            <td>Image</td>
                            <td>{{Status[object.status] | translate}}</td>
                            <td title="edit">
                                <button type="button" class="btn btn-link">
                                    <span class="oi oi-pencil" title="Edit" (click)="onShowToraObjectForm(object)"></span>
                                </button>
                            </td>
                            <td data-toggle="modal" data-target="#deleteModal" title="hapus">
                                <button type="button" class="btn btn-link">
                                    <span class="oi oi-trash" title="Hapus" (click)="delete(object.id)"></span>
                                </button>
                            </td>
                        </tr>
                    </ng-container>
                    <tr *ngIf="toraObjects.length < 1">
                        <td colspan="12" style="text-align:center; vertical-align:middle; background-color:#f2f2f2;">
                            Tidak ada Permasalahan Agraria
                        </td>
                    </tr>
                </ng-container>
            </tbody>
        </table>
        <!-- end table data utama -->
    </div>
</div>

<!-- MODAL -->


<!-- alert delete modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="alert alert-light alert-dismissible fade show" role="alert">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            <div class="form-row col-12">
                <div class="col-12">
                    <h3 class="alert-heading pb-4">Hapus data?</h3>
                </div>
            </div>
            <div class="nav justify-content-end pb-2 mt-4 mr-3">
                <button type="button" class="btn btn-secondary mr-3" data-dismiss="modal">Tutup</button>
                <button type="button" class="btn btn-danger" (click)="deleteObject()">Hapus</button>
            </div>
        </div>
    </div>
</div>
<!-- end alert delete modal -->